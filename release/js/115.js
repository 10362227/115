!function(){"use strict";function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.context=document.querySelector('iframe[rel="wangpan"]').contentDocument}return function(e,t,n){t&&a(e.prototype,t),n&&a(e,n)}(e,[{key:"showToast",value:function(e){var t=e.message,n=e.type;window.Core.MinMessage.Show({text:t,type:n,timeout:1e3})}},{key:"startListen",value:function(){var t=this;window.addEventListener("message",function(e){e.data.type&&"getSelected"===e.data.type&&window.postMessage({type:"selected",data:t.getSelected()},location.origin),e.data.type&&"getHovered"===e.data.type&&window.postMessage({type:"hovered",data:t.getHovered()},location.origin),e.data.type&&"showToast"===e.data.type&&t.showToast(e.data.data),e.data.type&&"refresh"===e.data.type&&t.refresh()})}},{key:"refresh",value:function(){this.context=document.querySelector('iframe[rel="wangpan"]').contentDocument}},{key:"getFileInfoFromElements",value:function(e){var n=[];return Array.from(e).forEach(function(e){var t=e.getAttribute("file_type");"1"===t&&n.push({isdir:!1,sha1:e.getAttribute("sha1"),pick_code:e.getAttribute("pick_code"),path:""}),"0"===t&&n.push({isdir:!0,cate_id:e.getAttribute("cate_id"),path:""})}),n}},{key:"getSelected",value:function(){var e=this.context.querySelectorAll('li[rel="item"].selected');return this.getFileInfoFromElements(e)}},{key:"getHovered",value:function(){var e=this.context.querySelectorAll('li[rel="item"].hover');return this.getFileInfoFromElements(e)}}]),e}())).startListen()}();